:root {
  --tech-bg: #1f1f1f; /* Negro Suave (Fondo Header) */
  --panel-bg: #2d2d2d; /* Gris Oscuro (Paneles) */
  --highlight: #dc2626; /* Rojo Intenso */
  --success: #059669;
  --text-main: #e5e7eb; /* Blanco Humo (Texto Principal) */
  --border-color: #4b5563; /* Gris Medio (Bordes) */
}

body {
  background-color: #121212 !important; /* Fondo General muy oscuro */
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  color: var(--text-main) !important;
  height: 100vh;
  overflow: hidden;
}

/* HEADER */
.app-header {
  height: 60px;
  background: var(--tech-bg) !important;
  color: white !important;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 25px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid #333;
}

/* NAVEGACION HEADER */
.nav-links { display: flex; gap: 20px; }
.nav-link { color: #9ca3af !important; text-decoration: none; font-weight: 600; font-size: 0.9rem; padding: 5px 10px; border-radius: 4px; transition: all 0.2s; }
.nav-link:hover, .nav-link.active { color: white !important; background: rgba(255,255,255,0.1); }

/* COMPONENTES UI REUTILIZABLES */
.btn { padding: 10px 20px; border-radius: 6px; border: none; font-weight: 700; cursor: pointer; transition: all 0.2s; text-transform: uppercase; font-size: 0.85rem; }
.btn-primary { background: var(--highlight); color: white; }
.btn-primary:hover { background: #b91c1c; }
.btn-secondary { background: #4b5563; color: white; }
.btn-secondary:hover { background: #374151; }
.btn-warning { background: #f59e0b; color: #000; }
.btn-dark { background: #111; color: #fff; border: 1px solid #444; }

/* LOGO CON FONDO BLANCO */
.app-header img { background-color: white; padding: 5px; border-radius: 4px; }

/* ===== NUEVO LAYOUT ===== */
.new-layout { display: flex; flex-direction: column; height: calc(100vh - 60px); }

.top-controls { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 15px; background: var(--panel-bg); border-bottom: 1px solid var(--border-color); }
.card-control { background: #374151; border: 1px solid var(--border-color); border-radius: 8px; padding: 12px; }
.control-title { font-size: 0.75rem; font-weight: 700; color: var(--highlight); margin-bottom: 8px; border-bottom: 1px solid #555; padding-bottom: 4px; letter-spacing: .5px; }

/* Inputs dentro de las tarjetas */
.form-select, .form-control {
    background-color: #1f2937 !important;
    border: 1px solid #4b5563 !important;
    color: #fff !important;
}
.form-select:focus, .form-control:focus {
    border-color: var(--highlight) !important;
    box-shadow: 0 0 0 0.2rem rgba(220, 38, 38, 0.25) !important;
}
.text-muted { color: #9ca3af !important; }

/* MATRIZ ABAJO */
.tech-matrix { flex: 1; overflow-y: auto; padding: 16px 20px; background-color: var(--panel-bg); }

/* Data grid reorganizada */
.data-grid.redesigned { display: grid; grid-template-columns: repeat(3, 1fr); grid-auto-rows: minmax(110px, auto); gap: 12px; }
.data-cell { background: #262626; border-radius: 12px; padding: 12px 14px; border: 1px solid var(--border-color); display: flex; flex-direction: column; justify-content: center; position: relative; transition: all 0.3s ease; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.data-cell.inactive { opacity: 0.45; filter: grayscale(100%); background: #1f2937; }
.data-cell.active { border-color: var(--highlight); background: #450a0a; box-shadow: 0 4px 6px rgba(220, 38, 38, 0.2); }
.cell-label { font-size: 0.8rem; font-weight: 600; color: #9ca3af; text-transform: uppercase; margin-bottom: 5px; }
.cell-value { font-size: 1.6rem; font-weight: 800; color: #f3f4f6; line-height: 1.1; }
.cell-value.huge { font-size: 2rem; color: var(--highlight); }
.cell-unit { font-size: 1rem; font-weight: 500; color: #94a3b8; }
.matrix-input { border: none; background: transparent; font-size: 1.2rem; font-weight: 800; color: #f3f4f6; width: 100%; border-bottom: 2px solid #6b7280; padding: 0; }
.matrix-input:focus { outline: none; border-color: var(--highlight); }
.matrix-input option { background-color: #333; }

/* Recap superior */
.recap-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
.recap-item { background: #2b2f36; border: 1px solid var(--border-color); border-radius: 8px; padding: 10px; }
.recap-label { font-size: .7rem; letter-spacing: .5px; color: #9ca3af; text-transform: uppercase; }
.recap-value { font-weight: 700; font-size: .95rem; color: #e5e7eb; }

/* RESPONSIVO */
@media (max-width: 1200px) {
  .top-controls { grid-template-columns: repeat(2, 1fr); }
  .data-grid.redesigned { grid-template-columns: repeat(2, 1fr); }
  .recap-grid { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 768px) {
  body { overflow: auto; }
  .top-controls { grid-template-columns: 1fr; position: sticky; top: 0; z-index: 5; }
  .data-grid.redesigned { grid-template-columns: 1fr; }
  .recap-grid { grid-template-columns: 1fr; }
}